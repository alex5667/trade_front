#!/bin/bash

# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ .env.local
# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ: ./scripts/setup-env.sh

echo "ðŸ”§ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ..."

ENV_FILE=".env.local"

if [ -f "$ENV_FILE" ]; then
    echo "âš ï¸  Ð¤Ð°Ð¹Ð» $ENV_FILE ÑƒÐ¶Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚"
    read -p "ÐŸÐµÑ€ÐµÐ·Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ? (y/N): " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        echo "âŒ ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½Ð¾"
        exit 0
    fi
fi

cat > "$ENV_FILE" << 'EOF'
# API Configuration
NEXT_PUBLIC_API_BASE_URL=http://localhost:4207/api

# WebSocket Configuration
NEXT_PUBLIC_WEBSOCKET_URL=http://localhost:4202

# Optional: Enable/Disable WebSocket
NEXT_PUBLIC_WEBSOCKET_ENABLED=true

# Optional: Mock Data Mode (ÐµÑÐ»Ð¸ backend Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½)
NEXT_PUBLIC_USE_MOCK_DATA=false
EOF

if [ $? -eq 0 ]; then
    echo "âœ… Ð¤Ð°Ð¹Ð» $ENV_FILE ÑÐ¾Ð·Ð´Ð°Ð½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!"
    echo ""
    echo "ðŸ“ Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ:"
    cat "$ENV_FILE"
    echo ""
    echo "ðŸš€ Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ: npm run dev"
else
    echo "âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ñ„Ð°Ð¹Ð»Ð° $ENV_FILE"
    exit 1
fi

exit 0


